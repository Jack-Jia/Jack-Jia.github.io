
<!doctype html>
<html lang="CN">
<head>
<meta charset="UTF-8">
<!-- <meta charset="gb2312"> -->
<title>Jack Jia</title>
<meta name="keywords" content="Jack Jia" />
<meta name="description" content="Jack Jia" />
<link href="css/base.css" rel="stylesheet">
<link href="css/about.css" rel="stylesheet">
<link href="css/media.css" rel="stylesheet">
<meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0">
<!--[if lt IE 9]>
<script src="js/modernizr.js"></script>
<![endif]-->
</head>
<body>
<div class="ibod">
  <header>
    <h1>Jack Jia  贾美刚</h1>
    <h2>能改变世界的,不是只有乔布斯...</h2>
    <div class="logo"><a href="/"></a></div>
    <nav id="topnav"><a href="index.html">首页</a><a href="#">慢生活</a><a href="#">技术宅</a><a href="#"></a><a href="about.html">Jack Jia</a></nav>
  </header>
  <article>
    <h3 class="about_h">您现在的位置是：<a href="/">首页</a>><a href="1/">Git专题</a></h3>
    <div class="about">
      <h2>Git服务器端配置文档</h2>










<p><span style="font-size: 18px;">Git是一个开源的分布式版本控制系统，用以有效、高速的处理从很小到非常大的项目版本管理。</span></p><p><span style="color: rgb(51, 51, 51); font-family: arial, 宋体, sans-serif; text-indent: 28px; widows: 1; background-color: rgb(255, 255, 255); font-size: 18px; line-height: 1.6;">分布式相比于集中式的最大区别在于开发者可以提交到本地，每个开发者通过克隆（git clone），在本地机器上拷贝一个完整的Git仓库。</span></p><p>
</p><p><img border="0" _src="file:///var/folders/z2/47y_wcqs473gytljfq588vfh0000gn/T/cn.wiz.wiznoteformac/WizNote/3855a4f0-db14-4b28-bd62-04a1b9736a50.png" src="Git服务器端配置文档_files/3855a4f0-db14-4b28-bd62-04a1b9736a50.png" /></p><p><span style="font-size: 18px;"></span></p><p>
</p><p><span style="font-size: 18px;">从一般开发者的角度</span></p><p>
</p><p>
</p><p><span style="font-size: 18px;">1、从服务器上克隆完整的Git仓库（包括代码和版本信息）到单机上。</span></p><p>
</p><p><span style="font-size: 18px;">2、在自己的机器上根据不同的开发目的，创建分支，修改代码。</span></p><p>
</p><p><span style="font-size: 18px;">3、在单机上自己创建的分支上提交代码。</span></p><p>
</p><p><span style="font-size: 18px;">4、在单机上合并分支。</span></p><p>
</p><p><span style="font-size: 18px;">5、把服务器上最新版的代码fetch下来，然后跟自己的主分支合并。</span></p><p>
</p><p><span style="font-size: 18px;">6、生成补丁（patch），把补丁发送给主开发者。</span></p><p>
</p><p><span style="font-size: 18px;">7、看主开发者的反馈，如果主开发者发现两个一般开发者之间有冲突（他们之间可以合作解决的冲突），就会要求他们先解决冲突，然后再由其中一个人提交。如果主开发者可以自己解决，或者没有冲突，就通过。</span></p><p>
</p><p><span style="font-size: 18px;">8、一般开发者之间解决冲突的方法，开发者之间可以使用pull 命令解决冲突，解决完冲突之后再向主开发者提交补丁。</span></p><p>
</p><p><span style="font-size: 18px;">从主开发者的角度（假设主开发者不用开发代码）看，git有以下功能：</span></p><p>
</p><p>
</p><p><span style="font-size: 18px;">1、查看邮件或者通过其它方式查看一般开发者的提交状态。</span></p><p>
</p><p><span style="font-size: 18px;">2、打上补丁，解决冲突（可以自己解决，也可以要求开发者之间解决以后再重新提交，如果是开源项目，还要决定哪些补丁有用，哪些不用）。</span></p><p>
</p><p>
</p><p><span style="font-size: 18px;">3、向公共服务器提交结果，然后通知所有开发人员。</span></p><p><span style="font-size: 18px;"><br/></span></p><p>
</p><p>
</p><p><span style="font-size: 14px;">





</span></p><p><strong><span style="font-size: 24px;">操作文档</span></strong></p><p><span style="font-size: 14px;">
</span></p><p><br/></p><span style="font-size: 18px;"><span style="font-size: 14px;">
</span><div style="font-size: 14px;">
<div style="padding: 10px; tab-size: 4; overflow: auto; border: 1px solid rgb(221, 221, 221); border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; widows: 1; background-color: rgb(250, 250, 250);">
<div>
<span style="font-size: 18px;"></span><p style="white-space: normal;"><span style="font-size: 18px; color: rgb(255, 0, 0);">测试操作环境:</span></p><p style="white-space: normal;"></p><p style="white-space: normal;"><span style="font-size: 18px; color: rgb(255, 0, 0);">服务器端: &nbsp;Ubuntu 14.04 LTS 虚拟机</span></p><p style="white-space: normal;"></p><p style="white-space: normal;"><span style="font-size: 18px; color: rgb(255, 0, 0);">开发端: windows 7 , Mac OS X Yosemite</span></p><p style="white-space: normal;"></p><p style="white-space: normal;"></p><p style="white-space: normal;"><span style="font-size: 18px; color: rgb(255, 0, 0);">软件: git , SourceTree</span></p><p style="white-space: normal;"></p><p style="white-space: normal;"></p><p style="white-space: normal;"><span style="font-size: 14px;"></span></p><span style="font-family: Helvetica, &#39;Hiragino Sans GB&#39;, &#39;Microsoft Yahei&#39;, SimSun, SimHei, arial, sans-serif; white-space: normal; font-size: 18px;"></span><span style="font-size: 18px;"></span></div>
</div>
</div><span style="font-size: 14px;">
</span></span><p><span style="font-size: 14px;">
</span></p><p><span style="font-size: 18px;">操作步骤:</span></p><p><span style="font-size: 14px;">

</span></p><p><strong><span style="font-size: 18px;">搭建git服务器</span></strong></p><p><span style="font-size: 14px;">

</span></p><p><span style="font-size: 18px;"><strong style="text-align: center; color: rgb(51, 51, 51); font-family: 宋体; text-indent: 28px; white-space: normal; widows: 1; background-color: rgb(248, 248, 248);">一.配置SSH无密码登陆</strong></span></p><p><span style="font-size: 14px;">
</span></p><p><span style="font-size: 18px; text-align: center; color: rgb(51, 51, 51); font-family: 宋体; text-indent: 28px; widows: 1; background-color: rgb(248, 248, 248);">1、安装OpenSSH</span></p><p><span style="font-size: 14px;">
</span></p><p><span style="font-size: 18px;"><span style="color: rgb(51, 51, 51); font-family: 宋体; text-indent: 28px; widows: 1; background-color: rgb(248, 248, 248);">(1)通过命令安装SSH服务。(</span><span style="font-family: 宋体; background-color: rgb(248, 248, 248); color: rgb(51, 51, 51);">ssh服务:数据加密协议)</span></span></p><p><span style="font-size: 14px;">
</span></p><p>
</p><p><span style="font-family: &#39;Helvetica Neue&#39;; text-indent: 28px; widows: 1; background-color: rgb(248, 248, 248); font-size: 18px; color: rgb(255, 38, 0);">sudo apt-get install openssh-server</span></p><p>
</p><p><span style="font-size: 18px; font-family: 宋体; background-color: rgb(248, 248, 248); color: rgb(51, 51, 51);">(2)检测ssh服务是否启动</span></p><p>
</p><p><span style="color: rgb(255, 38, 0); font-size: 18px;">netstat -an |more</span></p><p>
</p><p><span style="font-size: 14px;">
</span></p><p><span style="font-size: 18px;">查询是否存在Local Address:0.0.0.0:22端口 存在即启动</span></p><p><span style="font-size: 18px;"><br/></span></p><p><span style="font-size: 14px;">
</span></p><p><span style="font-size: 18px;">2<span style="text-align: center; color: rgb(51, 51, 51); font-family: 宋体; text-indent: 28px; widows: 1; background-color: rgb(248, 248, 248);">、创建一个git用户，用来运行git服务</span></span></p><p><span style="font-size: 14px;">
</span></p><p>
</p><p><span style="color: rgb(255, 38, 0); font-size: 18px;">sudo adduser git</span></p><p>
</p><p><span style="font-size: 14px;">
</span></p><p><span style="font-size: 18px;">填写密码和账户信息</span></p><p><span style="font-size: 14px;">


</span></p><p><span style="font-size: 18px;">3<span style="text-align: center; color: rgb(51, 51, 51); font-family: 宋体; text-indent: 28px; widows: 1; background-color: rgb(248, 248, 248);">、配置无密码SSH证书登录</span></span></p><p><span style="font-size: 14px;">
</span></p><p><span style="font-size: 18px;">在服务器端home/git文件中创建.ssh文件(.ssh为隐藏文件)</span></p><p><span style="font-size: 14px;">
</span></p><p><span style="color: rgb(255, 38, 0); font-size: 18px;">mkdir .ssh</span></p><p><span style="font-size: 14px;">
</span></p><p><span style="font-size: 18px;">然后再.ssh文件中创建<span style="color: rgb(51, 51, 51); font-family: 宋体; text-indent: 28px; widows: 1; background-color: rgb(248, 248, 248);">authorized_keys文件</span></span></p><p><span style="font-size: 14px;">
</span></p><p><span style="font-family: &#39;Helvetica Neue&#39;; text-indent: 28px; widows: 1; background-color: rgb(248, 248, 248); font-size: 18px; color: rgb(255, 38, 0);">touch authorized_keys</span></p><p><span style="font-size: 14px;">
</span></p><p><span style="font-size: 18px; font-family: 宋体; background-color: rgb(248, 248, 248); color: rgb(252, 46, 33);"></span></p><p><img border="0" _src="file:///var/folders/z2/47y_wcqs473gytljfq588vfh0000gn/T/cn.wiz.wiznoteformac/WizNote/cf043070-231c-4ab4-8d7a-33abe766db74.png" src="Git服务器端配置文档_files/cf043070-231c-4ab4-8d7a-33abe766db74.png" /></p><p><span style="font-size: 14px;">
</span></p><p><span style="font-size: 18px;">收集所有需要登录的开发者的公钥<span style="color: rgb(255, 38, 0);">id_rsa.pub</span>文件，把所有公钥导入到<span style="color: rgb(255, 38, 0);">/home/git/.ssh/</span></span><span style="color: rgb(255, 38, 0); font-size: 18px; font-family: 宋体; text-indent: 28px; widows: 1; background-color: rgb(248, 248, 248);">authorized_keys</span><span style="font-size: 18px;">文件里</span></p><p><span style="font-size: 14px;">

</span></p><p><strong><span style="font-size: 18px;">测试操作(Mac OS):</span></strong></p><p><span style="font-size: 14px;">

</span></p><p><span style="font-size: 18px;">(1)在开发机上<span style="color: rgb(51, 51, 51); font-family: 宋体; text-indent: 28px; widows: 1; background-color: rgb(248, 248, 248);">使用命令生成密钥</span></span></p><p><span style="font-size: 14px;">
</span></p><p><span style="color: rgb(255, 38, 0); font-size: 18px;">&nbsp;ssh-keygen -t rsa</span></p><p><span style="font-size: 14px;">
</span></p><p><img border="0" _src="file:///var/folders/z2/47y_wcqs473gytljfq588vfh0000gn/T/cn.wiz.wiznoteformac/WizNote/b8b81317-eb82-41b9-a879-2af646087ae4.png" src="Git服务器端配置文档_files/b8b81317-eb82-41b9-a879-2af646087ae4.png" /></p><p><span style="font-size: 14px;">

</span></p><p><span style="font-size: 18px;">成功后会在用户目录生成.ssh文件(.ssh为隐藏文件)</span></p><p><span style="font-size: 14px;">
</span></p><p>
</p><p><span style="font-size: 18px;">.ssh文件中可以看到<span style="color: rgb(51, 51, 51); font-family: 宋体; text-indent: 28px; widows: 1; background-color: rgb(248, 248, 248);">id_rsa和id_rsa.pub两个文件.</span></span></p><p>
</p><p><span style="font-size: 14px;">
</span></p><p><span style="font-size: 18px; color: rgb(51, 51, 51); font-family: 宋体; text-indent: 28px; widows: 1; background-color: rgb(248, 248, 248);">id_rsa.pub为公钥文件</span></p><p><span style="font-size: 14px;">

</span></p><p><span style="font-size: 18px;">(2)通过scp发送到服务器或者邮箱直接发给管理员</span></p><p><span style="font-size: 14px;">
</span></p><p><span style="font-family: Menlo; color: rgb(255, 38, 0);">scp /Users/Jack/.ssh/id_rsa.pub git@192.168.10.86:/home/git/.ssh</span></p><p><span style="font-family: Menlo; color: rgb(255, 38, 0);"><br/></span></p><p><span style="font-size: 14px;">
</span></p><p><img border="0" _src="file:///var/folders/z2/47y_wcqs473gytljfq588vfh0000gn/T/cn.wiz.wiznoteformac/WizNote/14948868-be50-4b40-a52a-14a7977df6bb.png" src="Git服务器端配置文档_files/14948868-be50-4b40-a52a-14a7977df6bb.png" /></p><p><span style="font-size: 14px;">

</span></p><p><span style="font-size: 18px;">(3)服务器端<span style="font-family: 宋体; background-color: rgb(248, 248, 248); color: rgb(51, 51, 51);">将开发机拷贝过来的公钥<span style="color: rgb(255, 38, 0);">id_rsa.pub</span>的内容追加到<span style="color: rgb(255, 38, 0);">authroized_keys</span>中并删除id_rsa.pub文件</span></span></p><p><span style="font-size: 14px;">
</span></p><p><span style="color: rgb(255, 38, 0); font-size: 18px;">cat /home/git/.ssh/id_rsa.pub &gt;&gt;/home/git/.ssh/authorized_keys&nbsp;</span></p><p><span style="font-size: 14px;">
</span></p><p><span style="color: rgb(255, 38, 0); font-size: 18px; font-family: 宋体; background-color: rgb(248, 248, 248);">rm -rf id_rsa.pub</span></p><p><img border="0" _src="file:///var/folders/z2/47y_wcqs473gytljfq588vfh0000gn/T/cn.wiz.wiznoteformac/WizNote/7bfc7b38-59bc-4dcc-a6fa-64a7ca421f94.png" src="Git服务器端配置文档_files/7bfc7b38-59bc-4dcc-a6fa-64a7ca421f94.png" /></p><p><span style="font-size: 14px;">

</span></p><p><span style="font-size: 18px;"><strong><span style="font-family: 宋体; background-color: rgb(248, 248, 248); color: rgb(51, 51, 51);">二.禁用shell登录</span></strong></span></p><p><span style="font-size: 14px;">
</span></p><p><span style="font-size: 18px; color: rgb(51, 51, 51); font-family: &#39;Helvetica Neue&#39;, Helvetica, Tahoma, Arial, STXihei, &#39;Microsoft YaHei&#39;, 微软雅黑, sans-serif; text-indent: 16px; widows: 1; background-color: rgb(254, 254, 254);">使用ssh的方式来访问,意味者，访问者具有权限可以ssh登陆到服务器上</span></p><p><span style="font-size: 14px;">
</span></p><p><span style="font-size: 18px; font-family: 宋体; background-color: rgb(248, 248, 248); color: rgb(51, 51, 51);">出于安全考虑，第一步创建的git用户不允许登录shell</span></p><p><span style="font-size: 14px;">
</span></p><span style="font-size: 18px; font-family: 宋体; background-color: rgb(248, 248, 248); color: rgb(51, 51, 51);"><br/></span><p><span style="font-size: 14px;">
</span></p><p><span style="font-size: 18px; font-family: 宋体; background-color: rgb(248, 248, 248); color: rgb(51, 51, 51);">编辑/etc/passwd文件完成git用户不允许登录shell</span></p><p><span style="font-size: 14px;">
</span></p><p><img border="0" _src="file:///var/folders/z2/47y_wcqs473gytljfq588vfh0000gn/T/cn.wiz.wiznoteformac/WizNote/075ae113-b300-4333-b198-4652fd58c816.png" src="Git服务器端配置文档_files/075ae113-b300-4333-b198-4652fd58c816.png" /></p><p><span style="font-size: 14px;">
</span></p><span style="font-size: 18px; font-family: 宋体; background-color: rgb(248, 248, 248); color: rgb(51, 51, 51);"><br/></span><p><span style="font-size: 14px;">
</span></p><p><span style="font-size: 18px;">找到</span></p><p><span style="font-size: 14px;">
</span></p><p><span style="font-size: 18px;">git:x:1001:1001:git,git,git,git,git:/home/git:/bin/bash</span></p><p><span style="font-size: 14px;">
</span></p><p><span style="font-size: 18px;">改为</span></p><p><span style="font-size: 14px;">
</span></p><p><span style="font-size: 18px;">git:x:1001:1001:git,git,git,git,git:/home/git:/usr/bin/git-shell</span></p><p><span style="font-size: 14px;">
</span></p><span style="font-size: 18px; font-family: 宋体; color: rgb(51, 51, 51);"><br/></span><p><span style="font-size: 14px;">
</span></p><p><span style="color: rgb(51, 51, 51); font-size: 18px; font-family: 宋体;">(文件只读需修改权限:</span><a href="http://jingyan.baidu.com/article/454316ab753a1cf7a6c03a75.html">http://jingyan.baidu.com/article/454316ab753a1cf7a6c03a75.html</a><span style="color: rgb(51, 51, 51); font-size: 18px; font-family: 宋体;">)</span></p><p><span style="font-size: 14px;">
</span></p><strong><span style="font-size: 18px; font-family: 宋体; background-color: rgb(248, 248, 248); color: rgb(51, 51, 51);"><br/></span></strong><p><span style="font-size: 14px;">
</span></p><p><span style="font-size: 18px;"><strong><span style="font-family: 宋体; background-color: rgb(248, 248, 248); color: rgb(51, 51, 51);">三.搭建git服务器</span></strong></span></p><p><span style="font-size: 14px;">
</span></p><strong><span style="font-size: 18px; font-family: 宋体; background-color: rgb(248, 248, 248); color: rgb(51, 51, 51);"><br/></span></strong><p><span style="font-size: 14px;">
</span></p><p><span style="font-size: 18px; font-family: 宋体; background-color: rgb(248, 248, 248); color: rgb(51, 51, 51);">1.在服务器端安装git</span></p><p><span style="font-size: 14px;">
</span></p><p><span style="color: rgb(51, 51, 51); font-size: 18px; font-family: 宋体;">首先需要修改git权限</span><span style="font-size: 18px;"><span style="background-color: rgb(248, 248, 248);"><span style="font-family:宋体;color:#333333">在system Setting—User Accounts—选择git用户 点击右上见Unlock &nbsp;</span></span><span style="color: rgb(51, 51, 51); font-family: 宋体;">在Account Type中修改为Administrator</span></span></p><p><span style="font-size: 14px;">

</span></p><p><img border="0" _src="file:///var/folders/z2/47y_wcqs473gytljfq588vfh0000gn/T/cn.wiz.wiznoteformac/WizNote/5d7322e0-ad20-4547-b01f-6e93ce10b05b.png" src="Git服务器端配置文档_files/5d7322e0-ad20-4547-b01f-6e93ce10b05b.png" /></p><p><span style="font-size: 14px;">

</span></p><p><span style="font-size: 18px; color: rgb(51, 51, 51); font-family: 宋体;">2.重启Terminal 进入git用户 安装git</span></p><p><span style="font-size: 14px;">
</span></p><p><span style="color: rgb(51, 51, 51); font-size: 18px; font-family: 宋体;">先升级:</span><span style="color: rgb(255, 38, 0); font-size: 18px; font-family: 宋体; background-color: rgb(248, 248, 248);">sudo apt-get update</span></p><p><span style="font-size: 14px;">
</span></p><p><span style="color: rgb(255, 38, 0); font-size: 18px; font-family: 宋体; background-color: rgb(248, 248, 248);">sudo apt-get install git-core</span></p><p><span style="font-size: 14px;">

</span></p><p><img border="0" _src="file:///var/folders/z2/47y_wcqs473gytljfq588vfh0000gn/T/cn.wiz.wiznoteformac/WizNote/dc5f666a-e909-4ce5-805a-d913936d8359.png" src="Git服务器端配置文档_files/dc5f666a-e909-4ce5-805a-d913936d8359.png" /></p><p><span style="font-size: 14px;">

</span></p><p><span style="font-size: 18px; color: rgb(255, 0, 0);">git --version</span><span style="font-size: 18px;">确定成功</span></p><p><span style="font-size: 14px;">



</span></p><p><span style="font-size: 18px;"><strong><span style="font-family: 宋体; background-color: rgb(248, 248, 248); color: rgb(51, 51, 51);"><br/></span></strong></span></p><p><span style="font-size: 18px;"><strong><span style="font-family: 宋体; background-color: rgb(248, 248, 248); color: rgb(51, 51, 51);">四.创建开发仓库</span></strong></span></p><p><span style="font-size: 14px;">
</span></p><p><span style="font-size: 18px;"><span style="font-family: 宋体; background-color: rgb(248, 248, 248); color: rgb(51, 51, 51);">1.</span><span style="text-align: center; color: rgb(51, 51, 51); font-family: 宋体; text-indent: 28px; widows: 1; background-color: rgb(248, 248, 248);">建立git仓库的存储目录</span></span></p><p><span style="font-size: 14px;">
</span></p><p><span style="color: rgb(255, 38, 0); font-size: 18px; font-family: 宋体; background-color: rgb(248, 248, 248);">mkdir repository</span></p><p><span style="font-size: 14px;">

</span></p><p><span style="font-size: 18px;"><span style="font-family: 宋体; background-color: rgb(248, 248, 248); color: rgb(51, 51, 51);">2.</span><span style="text-align: center; color: rgb(51, 51, 51); font-family: 宋体; text-indent: 28px; widows: 1; background-color: rgb(248, 248, 248);">始化服务器端仓库</span></span></p><p><span style="font-size: 14px;">
</span></p><p><span style="color: rgb(255, 38, 0); font-size: 18px;">git --bare init /home/git/<span style="font-family: 宋体; background-color: rgb(248, 248, 248);">repository/</span>myRepository.git</span></p><p><span style="font-size: 14px;">
</span></p><p><img border="0" _src="file:///var/folders/z2/47y_wcqs473gytljfq588vfh0000gn/T/cn.wiz.wiznoteformac/WizNote/d15e284f-e94e-4378-922a-24023aefb27a.png" src="Git服务器端配置文档_files/d15e284f-e94e-4378-922a-24023aefb27a.png" /></p><p><span style="font-size: 14px;">


</span></p><p><strong><span style="font-size: 18px;">五:克隆远程仓库</span></strong></p><p><span style="font-size: 14px;">
</span></p><p><span style="font-size: 18px;">开发机器需要安装git</span></p><p><span style="font-size: 14px;">
</span></p><p>
</p><p><span style="font-size: 18px;">然后通过git clone命令克隆远程仓库</span></p><p>
</p><p><span style="font-size: 14px;">
</span></p><p><span style="color: rgb(255, 38, 0); font-size: 18px;"><span style="font-family: 宋体; background-color: rgb(248, 248, 248);">git@192.168.10.86:/home/git</span>/<span style="font-family: 宋体; background-color: rgb(248, 248, 248);">repository/myRepository.git</span></span></p><p><span style="font-size: 14px;">
</span></p><p><br/></p><p><br/></p><p><br/></p><p><br/></p><p><br/></p><p><br/></p><p><span style="font-size: 18px; color: rgb(255, 0, 0);"></span></p><p style="white-space: normal;"><br/></p><p style="white-space: normal;"><span style="font-size: 14px;"></span></p><p><span style="font-family: Helvetica, &#39;Hiragino Sans GB&#39;, &#39;Microsoft Yahei&#39;, SimSun, SimHei, arial, sans-serif; white-space: normal; font-size: 18px;"><div style="font-size: 14px;"><div style="padding: 10px; tab-size: 4; overflow: auto; border: 1px solid rgb(221, 221, 221); border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; widows: 1; background-color: rgb(250, 250, 250);"><p><span style="font-size: 18px; color: rgb(255, 0, 0);"></span></p><p style="white-space: normal;"><span style="font-size: 18px; color: rgb(255, 0, 0);">测试操作环境:</span></p><p style="white-space: normal;"><span style="font-size: 18px; color: rgb(255, 0, 0);">服务器端: &nbsp;CentOS 6.7 虚拟机</span></p><p style="white-space: normal;"><span style="font-size: 18px; color: rgb(255, 0, 0);">开发端: windows 7 , Mac OS X Yosemite</span></p><p style="white-space: normal;"><span style="font-size: 18px; color: rgb(255, 0, 0);">软件: git , SourceTree</span></p><p></p><p><span style="font-size: 14px;"></span></p><span style="font-family: Helvetica, &#39;Hiragino Sans GB&#39;, &#39;Microsoft Yahei&#39;, SimSun, SimHei, arial, sans-serif; font-size: 18px;"></span><span style="font-size: 18px;"></span></div></div><span style="font-size: 14px;"></span></span></p><p style="white-space: normal;"><span style="font-size: 14px;"></span></p><p><br/></p><p style="font-family: Arial; font-size: 14px; white-space: normal; color: rgb(51, 51, 51); line-height: 26px; widows: 1; background-color: rgb(255, 255, 255);"><span style="font-size: 24px;"><strong><span style="color: rgb(0, 0, 0); font-family: &#39;Helvetica Neue&#39;;">一.git安装</span></strong></span></p><p style="white-space: normal; line-height: 26px; widows: 1; background-color: rgb(255, 255, 255);"><span style="font-size:24px"><span style="font-size: 18px;">1.依赖环境和库</span></span></p><p style="font-family: Arial; font-size: 14px; white-space: normal; color: rgb(51, 51, 51); line-height: 26px; widows: 1; background-color: rgb(255, 255, 255);"><span style="color: rgb(255, 0, 0); font-family: &#39;Helvetica Neue&#39;; font-size: 18px;">yum install curl-devel expat-devel gettext-devel openssl-devel zlib-devel perl-devel gcc gcc-c++ -y</span></p><p style="font-family: Arial; font-size: 14px; white-space: normal; color: rgb(51, 51, 51); line-height: 26px; widows: 1; background-color: rgb(255, 255, 255);"><span style="color: rgb(0, 0, 0); font-family: &#39;Helvetica Neue&#39;; font-size: 18px;">git包</span></p><p style="font-family: Arial; font-size: 14px; white-space: normal; color: rgb(51, 51, 51); line-height: 26px; widows: 1; background-color: rgb(255, 255, 255);"><span style="color: rgb(255, 0, 0); font-family: &#39;Helvetica Neue&#39;; font-size: 18px;">wget&nbsp;https://www.kernel.org/pub/software/scm/git/git-2.0.0.tar.gz</span></p><p><span style="color: rgb(0, 0, 0); font-family: &#39;Helvetica Neue&#39;; font-size: 18px;">解压安装(需要在root下进行)</span></p><p><span style="color: rgb(255, 0, 0); font-family: &#39;Helvetica Neue&#39;; font-size: 18px;">tar zxvf&nbsp;git-2.0.0.tar.gz</span></p><p><span style="color: rgb(255, 0, 0); font-family: &#39;Helvetica Neue&#39;; font-size: 18px;">cd git-2.0.0</span></p><p><span style="color: rgb(255, 0, 0); font-family: &#39;Helvetica Neue&#39;; font-size: 18px;">make prefix=/usr/local all</span></p><p><span style="color: rgb(255, 0, 0); font-family: &#39;Helvetica Neue&#39;; font-size: 18px;">make prefix=/usr/local install</span><span style="color: rgb(0, 0, 0); font-family: &#39;Helvetica Neue&#39;; font-size: 18px;">&nbsp;&nbsp;</span></p><p><span style="color: rgb(0, 0, 0); font-size: 18px;">查看版本号：</span><span style="font-size: 18px; color: rgb(255, 0, 0);">git --version</span><span style="color: rgb(0, 0, 0); font-size: 18px;"> 看是否安装成功</span></p><p><br/></p><p><img border="0" _src="file:///var/folders/z2/47y_wcqs473gytljfq588vfh0000gn/T/cn.wiz.wiznoteformac/WizNote/12706092.png" src="Git服务器端配置文档_files/12706092.png" /></p><p style="white-space: normal;"><br/></p><p style="white-space: normal;"><span style="font-size: 24px;"><strong><span style="font-family: &#39;Helvetica Neue&#39;;">二.安装gitosis</span></strong></span></p><p style="white-space: normal;"><span style="color: rgb(38, 38, 38); font-family: Arial; font-size: 22px; line-height: 26px; widows: 1;">gitosis为Git用户权限管理系统,通过管理服务端的/home/git/.ssh/authorized_key文件来执行对用户权限的管理，是一个python模块包</span></p><p style="white-space: normal;"><br/></p><p style="font-family: Arial; font-size: 14px; white-space: normal; color: rgb(51, 51, 51); line-height: 26px; widows: 1; background-color: rgb(255, 255, 255);"><span style="color: rgb(255, 0, 0); font-family: &#39;Helvetica Neue&#39;; font-size: 18px;">yum install python python-setuptools</span></p><p style="font-family: Arial; font-size: 14px; white-space: normal; color: rgb(51, 51, 51); line-height: 26px; widows: 1; background-color: rgb(255, 255, 255);"><span style="color: rgb(255, 0, 0); font-family: &#39;Helvetica Neue&#39;; font-size: 18px;">git clone git://github.com/res0nat0r/gitosis.git</span></p><p style="font-family: Arial; font-size: 14px; white-space: normal; color: rgb(51, 51, 51); line-height: 26px; widows: 1; background-color: rgb(255, 255, 255);"><span style="color: rgb(255, 0, 0); font-family: &#39;Helvetica Neue&#39;; font-size: 18px;">cd gitosis/</span></p><p style="font-family: Arial; font-size: 14px; white-space: normal; color: rgb(51, 51, 51); line-height: 26px; widows: 1; background-color: rgb(255, 255, 255);"><span style="color: rgb(255, 0, 0); font-family: &#39;Helvetica Neue&#39;; font-size: 18px;">python setup.py install</span></p><p style="font-family: Arial; font-size: 14px; white-space: normal; color: rgb(51, 51, 51); line-height: 26px; widows: 1; background-color: rgb(255, 255, 255);"><span style="color: rgb(0, 0, 0); font-family: &#39;Helvetica Neue&#39;; font-size: 18px;">显示Finished processing dependencies for gitosis==0.2即表示成功&nbsp;</span></p><p><img border="0" _src="file:///var/folders/z2/47y_wcqs473gytljfq588vfh0000gn/T/cn.wiz.wiznoteformac/WizNote/571438.png" src="Git服务器端配置文档_files/571438.png" /></p><p style="white-space: normal;"><br/></p><p style="white-space: normal;"><br/></p><p style="white-space: normal;"><strong><span style="font-size: 24px;">三.安装ssh</span></strong></p><p style="white-space: normal;"><span style="font-size: 18px;">1.安装ssh</span></p><p style="white-space: normal;"><span style="font-family: &#39;Times New Roman&#39;; font-size: 18px; color: rgb(255, 0, 0);">yum install openssh-server</span></p><p style="widows: 1; white-space: normal;"></p><p style="widows: 1; white-space: normal;"><span style="color: rgb(51, 51, 51); font-size: 18px; background-color: rgb(248, 248, 248); line-height: 1.6;">检测ssh服务是否启动</span></p><p style="white-space: normal;"><span style="font-size: 18px; color: rgb(255, 38, 0);">netstat -an |more</span></p><p style="white-space: normal;"><span style="font-size: 14px;"></span></p><p style="white-space: normal;">查询是否存在Local Address:0.0.0.0:22端口&nbsp;</p><p style="white-space: normal;"><span style="white-space: normal; line-height: 1.6; font-size: 18px; color: rgb(255, 0, 0); widows: 1; background-color: rgb(255, 255, 255);">chkconfig --list sshd&nbsp;</span><span style="white-space: normal; line-height: 1.6; font-size: 18px;"><span style="line-height: 26px; color: rgb(51, 51, 51); widows: 1; background-color: rgb(255, 255, 255);">检查SSHD是否在本运行级别下设置为开机启动</span><br style="color: rgb(51, 51, 51); font-family: Arial; font-size: 14px; line-height: 26px; widows: 1; background-color: rgb(255, 255, 255);"/><span style="line-height: 26px; color: rgb(255, 0, 0); widows: 1; background-color: rgb(255, 255, 255);">chkconfig --level 2345 sshd on</span><span style="line-height: 26px; color: rgb(51, 51, 51); widows: 1; background-color: rgb(255, 255, 255);">&nbsp;&nbsp;如果没设置启动就设置下.</span><br style="color: rgb(51, 51, 51); font-family: Arial; font-size: 14px; line-height: 26px; widows: 1; background-color: rgb(255, 255, 255);"/><span style="line-height: 26px; color: rgb(255, 0, 0); widows: 1; background-color: rgb(255, 255, 255);">service sshd restart&nbsp;</span><span style="line-height: 26px; color: rgb(51, 51, 51); widows: 1; background-color: rgb(255, 255, 255);">&nbsp;重新启动</span><br style="color: rgb(51, 51, 51); font-family: Arial; font-size: 14px; line-height: 26px; widows: 1; background-color: rgb(255, 255, 255);"/><span style="line-height: 26px; color: rgb(255, 0, 0); widows: 1; background-color: rgb(255, 255, 255);">netstat -antp |grep sshd</span><span style="line-height: 26px; color: rgb(51, 51, 51); widows: 1; background-color: rgb(255, 255, 255);">&nbsp;&nbsp;看是否启动了22端口.确认下.</span><br style="color: rgb(51, 51, 51); font-family: Arial; font-size: 14px; line-height: 26px; widows: 1; background-color: rgb(255, 255, 255);"/><span style="line-height: 26px; color: rgb(255, 0, 0); widows: 1; background-color: rgb(255, 255, 255);">iptables -nL&nbsp;</span><span style="line-height: 26px; color: rgb(51, 51, 51); widows: 1; background-color: rgb(255, 255, 255);">&nbsp;看看是否放行了22口.</span><br style="color: rgb(51, 51, 51); font-family: Arial; font-size: 14px; line-height: 26px; widows: 1; background-color: rgb(255, 255, 255);"/><span style="line-height: 26px; color: rgb(255, 0, 0); widows: 1; background-color: rgb(255, 255, 255);">setup-</span><span style="line-height: 26px; color: rgb(51, 51, 51); widows: 1; background-color: rgb(255, 255, 255);">---&gt;防火墙设置&nbsp; &nbsp;如果没放行就设置放行.</span></span></p><p style="white-space: normal;"><span style="color: rgb(51, 51, 51); font-size: 18px; line-height: 1.6; text-align: center; text-indent: 28px; widows: 1; background-color: rgb(248, 248, 248);"><br/></span></p><p style="white-space: normal;"><span style="color: rgb(51, 51, 51); font-size: 18px; line-height: 1.6; text-align: center; text-indent: 28px; widows: 1; background-color: rgb(248, 248, 248);"><br/></span></p><p style="white-space: normal;"><span style="color: rgb(51, 51, 51); font-size: 18px; line-height: 1.6; text-align: center; text-indent: 28px; widows: 1; background-color: rgb(248, 248, 248);">2.创建一个git用户，用来运行git服务</span><br/></p><p style="white-space: normal;"><span style="font-size: 18px; color: rgb(255, 38, 0); line-height: 1.6;">useradd&nbsp;</span><span style="font-size: 18px; color: rgb(255, 38, 0); line-height: 28px;">git &nbsp;<span style="color: rgb(0, 0, 0);">设置用户</span></span></p><p style="white-space: normal;"><span style="font-size: 18px; color: rgb(255, 38, 0); line-height: 28px;">passwd git &nbsp;<span style="color: rgb(0, 0, 0);">设置密码</span></span></p><p style="white-space: normal;"></p><p style="white-space: normal;"><span style="font-size: 14px;"></span></p><p style="white-space: normal;">提示输入新密码,输入密码</p><p style="white-space: normal;"><img border="0" _src="file:///var/folders/z2/47y_wcqs473gytljfq588vfh0000gn/T/cn.wiz.wiznoteformac/WizNote/4bba72ae-0bdb-4a84-a778-27349d54e4f0/Git服务器端配置文档_files/8689219.png" src="Git服务器端配置文档_files/8689219.png" /></p><p style="white-space: normal;"><br/></p><p style="white-space: normal;"><br/></p><p style="white-space: normal;"><br/></p><p style="white-space: normal;"><span style="font-size: 18px;">3<span style="font-family: 宋体; text-align: center; color: rgb(51, 51, 51); text-indent: 28px; widows: 1; background-color: rgb(248, 248, 248);">、配置无密码SSH证书登录</span></span></p><p style="white-space: normal;"><span style="font-size: 14px;"></span></p><p style="white-space: normal;"><span style="font-size: 18px;">在服务器端home/git文件中创建.ssh文件(.ssh为隐藏文件)</span></p><p style="white-space: normal;"><span style="font-size: 14px;"></span></p><p style="white-space: normal;"><span style="font-size: 18px; color: rgb(255, 38, 0);">mkdir .ssh</span></p><p style="white-space: normal;"><span style="font-size: 14px;"></span></p><p style="white-space: normal;"><span style="font-size: 18px;">然后再.ssh文件中创建<span style="color: rgb(51, 51, 51); text-indent: 28px; widows: 1; background-color: rgb(248, 248, 248);">authorized_keys文件</span></span></p><p style="white-space: normal;"><span style="font-size: 14px;"></span></p><p style="white-space: normal;"><span style="text-indent: 28px; widows: 1; background-color: rgb(248, 248, 248); color: rgb(255, 38, 0); font-size: 18px;">touch authorized_keys</span></p><p style="white-space: normal;"><img border="0" _src="file:///var/folders/z2/47y_wcqs473gytljfq588vfh0000gn/T/cn.wiz.wiznoteformac/WizNote/4bba72ae-0bdb-4a84-a778-27349d54e4f0/Git服务器端配置文档_files/1848770.png" src="Git服务器端配置文档_files/1848770.png" /></p><p style="white-space: normal;"><span style="font-size: 18px;"><span style="line-height: 1.6;">收集所有需要登录的开发者的公钥</span><span style="line-height: 1.6; color: rgb(255, 38, 0);">id_rsa.pub</span><span style="line-height: 1.6;">文件，把所有公钥导入到</span><span style="line-height: 1.6; color: rgb(255, 38, 0);">/home/git/.ssh/<span style="text-indent: 28px; widows: 1; background-color: rgb(248, 248, 248);">authorized_keys</span></span><span style="line-height: 1.6;">文件里</span></span></p><p style="white-space: normal;"><span style="font-size: 18px;"><span style="line-height: 1.6;">(用户可以通过scp&nbsp;<span style="font-family: Menlo; font-size: 14px;"><span style="color: rgb(255, 38, 0);">scp /Users/Jack/.ssh/id_rsa.pub git@192.168.10.86:/home/git/.ssh</span></span>)</span></span><span style="line-height: 1.6;"><br/></span></p><p style="white-space: normal;"><span style="font-size: 18px;"></span></p><p style="white-space: normal;">服务器端<span style="background-color: rgb(248, 248, 248); color: rgb(51, 51, 51);">将开发机拷贝过来的公钥<span style="color: rgb(255, 38, 0);">id_rsa.pub</span>的内容追加到<span style="color: rgb(255, 38, 0);">authroized_keys</span>中并删除id_rsa.pub文件</span></p><p style="white-space: normal;"><span style="font-size: 14px;"></span></p><p style="white-space: normal;"><span style="font-size: 18px; color: rgb(255, 38, 0);">cat /home/git/.ssh/id_rsa.pub &gt;&gt;/home/git/.ssh/authorized_keys&nbsp;</span></p><p style="white-space: normal;"><span style="font-size: 14px;"></span></p><p style="white-space: normal;"><span style="background-color: rgb(248, 248, 248); font-size: 18px; color: rgb(255, 38, 0);">rm -rf id_rsa.pub</span></p><p style="white-space: normal;"><span style="font-size: 14px;"></span></p><div style="white-space: normal;"><img border="0" src="Git服务器端配置文档_files/12689285.png" /></div><p style="white-space: normal;"><br/></p><p style="white-space: normal;"><span style="font-size: 18px; font-family: &#39;Helvetica Neue&#39;; color: rgb(0, 0, 0);">ps:<span style="font-size: 18px; font-family: &#39;Helvetica Neue&#39;; line-height: 22px;">报错</span></span></p><p style="white-space: normal;"><font color="#ff2600" face="Menlo"><span style="font-size: 14px; line-height: 22px;"></span></font></p><p style="margin-top: 0px; margin-bottom: 0px; white-space: normal;"><span style="font-family: Menlo;">@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@</span></p><p style="white-space: normal;"></p><p style="margin-top: 0px; margin-bottom: 0px; white-space: normal;"><span style="font-family: Menlo;">@&nbsp; &nbsp; WARNING: REMOTE HOST IDENTIFICATION HAS CHANGED! &nbsp; &nbsp; @</span></p><p style="white-space: normal;"></p><p style="margin-top: 0px; margin-bottom: 0px; white-space: normal;"><span style="font-family: Menlo;">@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@</span></p><p style="white-space: normal;"><font color="#ff2600" face="Menlo"><span style="font-size: 14px; line-height: 22px;">解决方法:</span></font></p><p style="white-space: normal;"><font color="#ff2600" face="Menlo"><span style="font-size: 14px; line-height: 22px;">rm -rf ~/.ssh/known_hosts</span></font></p><font color="#ff2600" face="Menlo"><span style="font-size: 14px; line-height: 22px;"><br/></span></font><p style="white-space: normal;"><br/></p><p style="white-space: normal;"><span style="font-size: 18px;"><strong><span style="font-family: 宋体; background-color: rgb(248, 248, 248); color: rgb(51, 51, 51);">四.创建开发仓库</span></strong></span></p><p style="white-space: normal;"><span style="font-size: 18px;"><span style="font-family: 宋体;"><span style="background-color: rgb(248, 248, 248);"><span style="color: rgb(51, 51, 51);">1</span></span></span></span><span style="font-size: 18px;"><span style="text-align: center; color: rgb(51, 51, 51); font-family: 宋体; text-indent: 28px; widows: 1; background-color: rgb(248, 248, 248);">建立git仓库的存储目录</span></span></p><p style="white-space: normal;"><span style="font-size: 14px;"></span></p><p style="white-space: normal;"><span style="background-color: rgb(248, 248, 248); font-family: &#39;Helvetica Neue&#39;; font-size: 18px; color: rgb(255, 38, 0);">mkdir repository</span></p><p style="white-space: normal;"><span style="font-size: 14px;"></span><span style="font-size: 14px;"></span></p><p style="white-space: normal;"><span style="font-size: 18px;"><span style="text-align: center; color: rgb(51, 51, 51); font-family: 宋体; text-indent: 28px; widows: 1; background-color: rgb(248, 248, 248);">2始化服务器端仓库</span></span></p><p style="white-space: normal;"><span style="font-size: 14px;"></span></p><p style="white-space: normal;"><span style="color: rgb(255, 38, 0); font-family: &#39;Helvetica Neue&#39;; font-size: 18px;">git --bare init /home/git/<span style="color: rgb(255, 38, 0); background-color: rgb(248, 248, 248);">repository/</span>myRepository.git</span></p><p style="white-space: normal;"><span style="color: rgb(255, 38, 0);"><span style="font-size: 18px;"></span></span></p><div><img border="0" src="Git服务器端配置文档_files/12050619.png" /></div><p style="white-space: normal;"><strong><span style="font-size: 18px;"><br/></span></strong></p><p style="white-space: normal;"><strong><span style="font-size: 18px;">四:克隆远程仓库</span></strong><br/></p><p style="white-space: normal;"><span style="font-size: 14px;"></span></p><p style="white-space: normal;"><span style="font-size: 18px;">开发机器需要安装git</span></p><p style="white-space: normal;"><span style="font-size: 14px;"></span></p><p style="white-space: normal;"></p><p style="white-space: normal;"><span style="font-size: 18px;">然后通过git clone命令克隆远程仓库</span></p><p style="white-space: normal;"></p><p style="white-space: normal;"><span style="font-size: 14px;"></span></p><p style="white-space: normal;"><span style="color: rgb(255, 0, 0);"><span style="background-color: rgb(248, 248, 248);"></span><span style="color: rgb(255, 0, 0); font-family: &#39;Helvetica Neue&#39;; font-size: 17px;">git@192.168.10.163:/home/git/repository/myRepository.git</span></span></p><span style="color: rgb(255, 0, 0);"><br/></span><p style="white-space: normal;"><br/></p><p style="white-space: normal;"><br/></p><p style="white-space: normal;"><br/></p><p style="white-space: normal;"><br/></p><p style="white-space: normal;"><br/></p><p style="white-space: normal;"><span style="font-size: 18px;">附加1:</span><span style="color: rgb(255, 0, 0); font-size: 18px; line-height: 1.6;">给用户git设置 root权限</span></p><p style="white-space: normal;"><span style="font-size: 18px;"></span></p><p style="white-space: normal;">1）进入超级用户模式。也就是输入&quot;su root&quot;,系统会让你输入超级用户密码，输入密码后就进入了超级用户模式。（当然，你也可以直接用root用）&nbsp;</p><p style="white-space: normal;">2）添加文件的写权限。也就是输入命令&quot;chmod u+w /etc/sudoers&quot;。&nbsp;</p><p style="white-space: normal;"><img border="0" _src="file:///var/folders/z2/47y_wcqs473gytljfq588vfh0000gn/T/cn.wiz.wiznoteformac/WizNote/4bba72ae-0bdb-4a84-a778-27349d54e4f0/Git服务器端配置文档_files/15563282.png" src="Git服务器端配置文档_files/15563282.png" /></p><p style="white-space: normal;">3）编辑/etc/sudoers文件:输入命令&quot;vim /etc/sudoers&quot;,点击，找到这一 行：&quot;root ALL=(ALL) ALL&quot;在起下面添加&quot;git ALL=(ALL) ALL&quot;(这里的git是你的用户名)，然后保存（就是先按一 下Esc键，然后输入&quot;:wq&quot;）退出。&nbsp;</p><p style="white-space: normal;">不行就强写:wq!</p><p style="white-space: normal;"><img border="0" _src="file:///var/folders/z2/47y_wcqs473gytljfq588vfh0000gn/T/cn.wiz.wiznoteformac/WizNote/4bba72ae-0bdb-4a84-a778-27349d54e4f0/Git服务器端配置文档_files/12806934.png" src="Git服务器端配置文档_files/12806934.png" /></p><p style="white-space: normal;"><span style="line-height: 1.6;">4）撤销文件的写权限。也就是输入命令&quot;chmod u-w /etc/sudoers&quot;<br/></span></p><p style="white-space: normal;"><span style="font-size: 18px; color: rgb(255, 0, 0);">重启终端</span></p><p style="white-space: normal;"><span style="font-size: 18px;"><span style="font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: 13px; line-height: 19.5px; widows: 1; background-color: rgb(40, 85, 126);"></span><span style="font-size: 15px;">ps:这里说下你可以sudoers添加下面四行中任意一条<br/>youuser&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ALL=(ALL)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ALL<br/>%youuser&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ALL=(ALL)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ALL<br/>youuser&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ALL=(ALL)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; NOPASSWD: ALL<br/>%youuser&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ALL=(ALL)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; NOPASSWD: ALL<br/><br/>第一行:允许用户youuser执行sudo命令(需要输入密码).<br/>第二行:允许用户组youuser里面的用户执行sudo命令(需要输入密码).<br/>第三行:允许用户youuser执行sudo命令,并且在执行的时候不输入密码.<br/>第四行:允许用户组youuser里面的用户执行sudo命令,并且在执行的时候不输入密码.</span></span></p><p style="white-space: normal;"><br/></p><p style="white-space: normal;"><br/></p><p style="white-space: normal;"><br/></p><p style="white-space: normal;"><br/></p><p style="white-space: normal;"><span style="font-size: 18px; line-height: 28px; white-space: normal;">附加2:</span><span style="font-family: Arial; background-color: rgb(248, 248, 248); color: rgb(255, 0, 0); font-size: 18px;">禁用shell登录</span></p><p style="white-space: normal;"><span style="font-size: 14px;"></span></p><p style="white-space: normal;"><span style="font-size: 18px; color: rgb(51, 51, 51); font-family: &#39;Helvetica Neue&#39;, Helvetica, Tahoma, Arial, STXihei, &#39;Microsoft YaHei&#39;, 微软雅黑, sans-serif; text-indent: 16px; widows: 1; background-color: rgb(254, 254, 254);">使用ssh的方式来访问,意味者，访问者具有权限可以ssh登陆到服务器上</span></p><p style="white-space: normal;"><span style="font-size: 14px;"></span></p><p style="white-space: normal;"><span style="font-size: 18px; font-family: 宋体; background-color: rgb(248, 248, 248); color: rgb(51, 51, 51);">出于安全考虑，第一步创建的git用户不允许登录shell</span></p><p style="white-space: normal;"><span style="font-size: 18px; font-family: 宋体; background-color: rgb(248, 248, 248); color: rgb(51, 51, 51);">编辑/etc/passwd文件完成git用户不允许登录shell</span></p><p style="white-space: normal;"><span style="font-size: 14px;"></span></p><p style="white-space: normal;">1）进入超级用户模式。也就是输入&quot;su root&quot;,输入密码</p><p style="white-space: normal;">2）添加文件的写权限。也就是输入命令&quot;chmod u+w /etc/passwd&quot;。&nbsp;</p><p style="white-space: normal;"><span style="line-height: 1.6;">3）编辑/etc/sudoers文件:输入命令&quot;vim /etc/passwd&quot;,回车</span></p><p style="white-space: normal;"><span style="line-height: 1.6;">找到</span></p><p style="white-space: normal;">git:x:501:501::/home/git:/bin//bash</p><p style="white-space: normal;">改为</p><p style="white-space: normal;">git:x:501:501::/home/git:/usr/bin/git-shell</p><p style="white-space: normal;"><span style="line-height: 1.6;">保存（就是先按一 下Esc键，然后输入&quot;:wq&quot;）退出。&nbsp;<br/></span></p><p style="white-space: normal;">不行就强写:wq!</p><p style="white-space: normal;"><img border="0" _src="file:///var/folders/z2/47y_wcqs473gytljfq588vfh0000gn/T/cn.wiz.wiznoteformac/WizNote/4bba72ae-0bdb-4a84-a778-27349d54e4f0/Git服务器端配置文档_files/12017005.png" src="Git服务器端配置文档_files/12017005.png" /></p><p style="white-space: normal;"><br/></p><p style="white-space: normal;"><span style="line-height: 1.6;">4）撤销文件的写权限。也就是输入命令&quot;chmod u-w /etc/passwd&quot;</span></p><span style="line-height: 1.6;"><br/></span>











<span style="font-size:20px;color:red;">写博文不易,转载请注明:<br>本文作者:Jack Jia  <br>微博: <a href="http://weibo.com/5794889317/profile?topnav=1&wvr=6&is_all=1">筑梦小丑_Dream</a><br>博客地址<a href="http://blog.csdn.net/jackjia2015">http://blog.csdn.net/jackjia2015</a>  </span>

      <ul class="blog_a">
      </ul>
    </div>
  </article>

  <script src="js/silder.js"></script>
  <div class="clear"></div>
  <!-- 清除浮动 --> 
</div>
</body>
</html>
